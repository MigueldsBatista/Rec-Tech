{% extends 'main.html' %}

{% block content %}
<div class="container-fluid mt-4"> <!-- Use container-fluid para mais largura -->
  <div class="card"> <!-- Envolve todo o conteúdo em um card -->
    <div class="card-header"> <!-- Cabeçalho do card -->
      <h2>Lixeiras Cadastradas</h2> <!-- Título da seção -->
    </div>
    <div class="card-body"> <!-- Corpo do card -->
      <table class="table table-striped w-100"> <!-- Mesa com listras -->
        <thead> <!-- Cabeçalho da tabela -->
          <tr>
            <th>Email do Proprietário</th>
            <th>Tipo de Resíduo</th>
            <th>Localização</th>
            <th>Capacidade Máxima (kg)</th>
            <th>Estado Atual (kg)</th>
            <th>Status de Manutenção</th>
            <th>Progresso</th> <!-- Progresso sem a porcentagem -->
          </tr>
        </thead>
        <tbody>
          {% for lixeira in lixeiras %}
          <tr>
            <td>{{ lixeira.email }}</td> <!-- Email do proprietário -->
            <td>{{ lixeira.tipo_residuo }}</td> <!-- Tipo de resíduo -->
            <td>{{ lixeira.localizacao }}</td> <!-- Localização -->
            <td>{{ lixeira.capacidade_maxima }}</td> <!-- Capacidade máxima -->
            <td>{{ lixeira.estado_atual }}</td> <!-- Estado atual -->
            <td> <!-- Status de Manutenção -->
              {% if lixeira.status_manutencao %}
                <span class="text-danger">Sim</span> <!-- Vermelho para manutenção necessária -->
              {% else %}
                <span class="text-success">Não</span> <!-- Verde para manutenção não necessária -->
              {% endif %}
            </td>
            <td> <!-- Barra de Progresso mais Comprida e sem Porcentagem -->
              <div class="progress" style="height: 24px;"> <!-- Aumenta a altura para maior visibilidade -->
                <div class="progress-bar custom-progress-bar" 
                     role="progressbar" 
                     style="width: {{ lixeira.get_progresso }}%;" 
                     aria-valuenow="{{ lixeira.get_progresso }}" 
                     aria-valuemin="0" 
                     aria-valuemax="100"></div> <!-- Sem valor numérico -->
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock content %}

{% block extra_css %}
<style>
  .custom-progress-bar {
    background: linear-gradient(to right, #28a745, #ffc107, #dc3545); /* Gradiente para mudança gradual */
    transition: width 0.5s; /* Transição suave para a barra */
  }

  .table { 
    width: 100%; /* Certifica-se de que a tabela ocupa toda a largura disponível */
    table-layout: fixed; /* Mantém largura uniforme */
  }

  .table th, 
  .table td {
    padding: 12px; /* Adiciona espaçamento entre as células */
  }
</style>
{% endblock extra_css %}
